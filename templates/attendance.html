<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Attendance Tracker (Local Storage)</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 30px;
    background-color: #f4f7fa;
    color: #333;
  }

  h2 {
    text-align: center;
    color: #2c3e50;
  }

  input[type="text"] {
    padding: 8px 12px;
    width: 200px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
    margin-right: 10px;
  }

  button {
    padding: 8px 16px;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  button:hover {
    background-color: #2980b9;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background-color: white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    border-radius: 8px;
    overflow: hidden;
  }

  th {
    background-color: #2c3e50;
    color: white;
    padding: 10px;
    position: sticky;
    top: 0;
    z-index: 1;
  }

  td {
    padding: 10px;
    font-size: 14px;
    transition: background-color 0.3s;
  }

  .present {
    background-color: #d4edda;
    color: #155724;
    font-weight: bold;
  }

  .absent {
    background-color: #f8d7da;
    color: #721c24;
    font-weight: bold;
  }

  @media (max-width: 768px) {
    table, thead, tbody, th, td, tr {
      font-size: 12px;
    }

    input[type="text"] {
      width: 100%;
      margin-bottom: 10px;
    }

    button {
      width: 100%;
    }
  }
</style>

</head>
<body>
  <h2>Monthly Attendance Tracker</h2>

  <label for="employeeName">Add Employee:</label>
  <input type="text" id="employeeName" />
  <button onclick="addEmployee()">Add</button>
  <button onclick="resetAttendance()" style="margin-left: 10px; background-color: #e74c3c;">
  Reset Attendance
</button>


  <table id="attendanceTable">
    <thead>
      <tr>
        <th>Employee Name</th>
        <!-- Generate 30 days -->
        <script>
          for (let i = 1; i <= 30; i++) {
            document.write(`<th>${i}</th>`);
          }
        </script>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const tableBody = document.querySelector("#attendanceTable tbody");
    const localKey = "monthlyAttendance";

    let attendanceData = JSON.parse(localStorage.getItem(localKey)) || [];

    function saveData() {
      localStorage.setItem(localKey, JSON.stringify(attendanceData));
    }

    function loadAttendance() {
      tableBody.innerHTML = ""; // Clear
      attendanceData.forEach((emp, index) => {
        const row = document.createElement("tr");
        const nameCell = document.createElement("td");
        nameCell.textContent = emp.name;
        row.appendChild(nameCell);

        emp.days.forEach((status, dayIdx) => {
          const cell = document.createElement("td");
          cell.textContent = status;
          updateCellStyle(cell, status);
          cell.onclick = () => {
            let newStatus;
            if (cell.textContent === "P") newStatus = "A";
            else if (cell.textContent === "A") newStatus = "-";
            else newStatus = "P";

            cell.textContent = newStatus;
            updateCellStyle(cell, newStatus);
            attendanceData[index].days[dayIdx] = newStatus;
            saveData();
          };
          row.appendChild(cell);
        });

        tableBody.appendChild(row);
      });
    }

    function addEmployee() {
      const name = document.getElementById("employeeName").value.trim();
      if (!name) return alert("Please enter a name.");
      if (attendanceData.find(e => e.name.toLowerCase() === name.toLowerCase())) {
        return alert("Employee already exists.");
      }

      attendanceData.push({ name, days: Array(30).fill("-") });
      saveData();
      loadAttendance();
      document.getElementById("employeeName").value = "";
    }

    function updateCellStyle(cell, status) {
      cell.className = status === "P" ? "present" : status === "A" ? "absent" : "";
    }

    // Initial load
    loadAttendance();


    function resetAttendance() {
  const confirmReset = confirm("Are you sure you want to clear all attendance data?");
  if (confirmReset) {
    localStorage.removeItem(localKey);
    attendanceData = [];
    loadAttendance();
    alert("Attendance has been reset.");
  }
}

  </script>
</body>
</html>
